<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Birthday Reminder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        #threejs-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: fadeInDown 1s ease-out;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #ff6b6b, #feca57, #48dbfb, #ff9ff3);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientShift 3s ease-in-out infinite;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }

        .header p {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.2rem;
            font-weight: 300;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .form-section, .birthdays-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 1s ease-out;
        }

        .form-section h2, .birthdays-section h2 {
            color: white;
            font-size: 2rem;
            margin-bottom: 25px;
            text-align: center;
            position: relative;
        }

        .form-section h2::after, .birthdays-section h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            border-radius: 2px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 1rem;
        }

        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .form-group input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
            border-color: #ff6b6b;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 107, 0.6);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .birthday-item {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            animation: slideInRight 0.5s ease-out;
        }

        .birthday-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s ease;
        }

        .birthday-item:hover::before {
            left: 100%;
        }

        .birthday-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            background: rgba(255, 255, 255, 0.2);
        }

        .birthday-item.upcoming {
            border-left: 5px solid #ff6b6b;
            background: rgba(255, 107, 107, 0.2);
        }

        .birthday-item.today {
            border-left: 5px solid #feca57;
            background: rgba(254, 202, 87, 0.2);
            animation: pulse 2s infinite;
        }

        .birthday-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .birthday-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: white;
        }

        .birthday-date {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
        }

        .birthday-info {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 15px;
            align-items: center;
        }

        .birthday-details {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .days-until {
            font-size: 0.9rem;
            color: #feca57;
            font-weight: 500;
        }

        .delete-btn {
            background: linear-gradient(45deg, #ff4757, #ff3838);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            color: white;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(255, 71, 87, 0.4);
        }

        .delete-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.6);
        }

        .empty-state {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            font-size: 1.1rem;
            padding: 40px 20px;
        }

        .empty-state::before {
            content: '🎂';
            font-size: 3rem;
            display: block;
            margin-bottom: 15px;
            animation: bounce 2s infinite;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            background: rgba(255, 255, 255, 0.15);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #feca57;
            display: block;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #10ac84, #1dd1a1);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(16, 172, 132, 0.4);
            transform: translateX(400px);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #feca57;
            animation: confetti-fall 3s linear infinite;
            z-index: 100;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .stats {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 20px rgba(254, 202, 87, 0.5);
            }
            50% {
                box-shadow: 0 0 40px rgba(254, 202, 87, 0.8);
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .birthday-item.celebrating {
            animation: celebrate 1s ease-in-out;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.05) rotate(2deg); }
            50% { transform: scale(1.1) rotate(-2deg); }
            75% { transform: scale(1.05) rotate(1deg); }
        }

        .floating-particles {
            position: fixed;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #ff6b6b, #feca57);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
            animation: float 4s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg);
                opacity: 0.7;
            }
            50% { 
                transform: translateY(-20px) rotate(180deg);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div id="threejs-background"></div>
    
    <div class="container">
        <div class="header">
            <h1>🎉 Ultimate Birthday Reminder 🎂</h1>
            <p>Never miss a special day again - with style and 3D magic!</p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <span class="stat-number" id="total-birthdays">0</span>
                <div class="stat-label">Total Birthdays</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="upcoming-count">0</span>
                <div class="stat-label">This Month</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="today-count">0</span>
                <div class="stat-label">Today</div>
            </div>
        </div>

        <div class="main-content">
            <div class="form-section">
                <h2>✨ Add New Birthday</h2>
                <form id="birthday-form">
                    <div class="form-group">
                        <label for="name">👤 Name</label>
                        <input type="text" id="name" placeholder="Enter person's name" required>
                    </div>
                    <div class="form-group">
                        <label for="date">📅 Birthday Date</label>
                        <input type="date" id="date" required>
                    </div>
                    <div class="form-group">
                        <label for="notes">📝 Notes (Optional)</label>
                        <input type="text" id="notes" placeholder="Special notes or wishes">
                    </div>
                    <button type="submit" class="btn">🎈 Add Birthday</button>
                </form>
            </div>

            <div class="birthdays-section">
                <h2>🎂 Birthday List</h2>
                <div id="birthdays-container">
                    <div class="empty-state">
                        <div>No birthdays added yet!</div>
                        <div style="font-size: 0.9rem; margin-top: 10px;">Add your first birthday to get started</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // Birthday Management System
        class BirthdayManager {
            constructor() {
                this.birthdays = this.loadBirthdays();
                this.form = document.getElementById('birthday-form');
                this.container = document.getElementById('birthdays-container');
                this.notification = document.getElementById('notification');
                
                this.initializeEventListeners();
                this.renderBirthdays();
                this.updateStats();
                this.checkTodaysBirthdays();
                this.createFloatingParticles();
                
                // Update every minute to check for new birthdays
                setInterval(() => this.checkTodaysBirthdays(), 60000);
            }

            initializeEventListeners() {
                this.form.addEventListener('submit', (e) => this.handleSubmit(e));
            }

            loadBirthdays() {
                const stored = {};
                let counter = 1;
                
                while (true) {
                    const birthday = {
                        name: this.getCookie(`birthday_${counter}_name`),
                        date: this.getCookie(`birthday_${counter}_date`),
                        notes: this.getCookie(`birthday_${counter}_notes`),
                        id: this.getCookie(`birthday_${counter}_id`)
                    };
                    
                    if (!birthday.name || !birthday.date) break;
                    
                    stored[birthday.id || `birthday_${counter}`] = birthday;
                    counter++;
                }
                
                return stored;
            }

            saveBirthdays() {
                // Clear existing cookies
                let counter = 1;
                while (this.getCookie(`birthday_${counter}_name`)) {
                    this.deleteCookie(`birthday_${counter}_name`);
                    this.deleteCookie(`birthday_${counter}_date`);
                    this.deleteCookie(`birthday_${counter}_notes`);
                    this.deleteCookie(`birthday_${counter}_id`);
                    counter++;
                }

                // Save new data
                const birthdayArray = Object.values(this.birthdays);
                birthdayArray.forEach((birthday, index) => {
                    const i = index + 1;
                    this.setCookie(`birthday_${i}_name`, birthday.name, 365);
                    this.setCookie(`birthday_${i}_date`, birthday.date, 365);
                    this.setCookie(`birthday_${i}_notes`, birthday.notes || '', 365);
                    this.setCookie(`birthday_${i}_id`, birthday.id, 365);
                });
            }

            setCookie(name, value, days) {
                const expires = new Date();
                expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
                document.cookie = `${name}=${encodeURIComponent(value)};expires=${expires.toUTCString()};path=/`;
            }

            getCookie(name) {
                const nameEQ = name + "=";
                const cookies = document.cookie.split(';');
                for (let cookie of cookies) {
                    let c = cookie.trim();
                    if (c.indexOf(nameEQ) === 0) {
                        return decodeURIComponent(c.substring(nameEQ.length));
                    }
                }
                return null;
            }

            deleteCookie(name) {
                document.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/`;
            }

            handleSubmit(e) {
                e.preventDefault();
                
                const name = document.getElementById('name').value.trim();
                const date = document.getElementById('date').value;
                const notes = document.getElementById('notes').value.trim();

                if (!name || !date) {
                    this.showNotification('Please fill in all required fields!', 'error');
                    return;
                }

                const id = 'birthday_' + Date.now();
                this.birthdays[id] = { id, name, date, notes };
                
                this.saveBirthdays();
                this.renderBirthdays();
                this.updateStats();
                this.form.reset();
                
                this.showNotification(`🎉 ${name}'s birthday added successfully!`, 'success');
                this.createConfetti();
            }

            deleteBirthday(id) {
                const birthday = this.birthdays[id];
                if (birthday && confirm(`Are you sure you want to remove ${birthday.name}'s birthday?`)) {
                    delete this.birthdays[id];
                    this.saveBirthdays();
                    this.renderBirthdays();
                    this.updateStats();
                    this.showNotification(`${birthday.name}'s birthday removed`, 'info');
                }
            }

            renderBirthdays() {
                const birthdayArray = Object.values(this.birthdays);
                
                if (birthdayArray.length === 0) {
                    this.container.innerHTML = `
                        <div class="empty-state">
                            <div>No birthdays added yet!</div>
                            <div style="font-size: 0.9rem; margin-top: 10px;">Add your first birthday to get started</div>
                        </div>
                    `;
                    return;
                }

                // Sort by next upcoming birthday
                birthdayArray.sort((a, b) => {
                    const daysA = this.getDaysUntilBirthday(a.date);
                    const daysB = this.getDaysUntilBirthday(b.date);
                    return daysA - daysB;
                });

                this.container.innerHTML = birthdayArray.map(birthday => {
                    const daysUntil = this.getDaysUntilBirthday(birthday.date);
                    const isToday = daysUntil === 0;
                    const isUpcoming = daysUntil <= 7 && daysUntil > 0;
                    
                    let statusClass = '';
                    let statusText = '';
                    
                    if (isToday) {
                        statusClass = 'today';
                        statusText = '🎉 TODAY! 🎉';
                    } else if (isUpcoming) {
                        statusClass = 'upcoming';
                        statusText = `${daysUntil} day${daysUntil === 1 ? '' : 's'} to go`;
                    } else {
                        statusText = `${daysUntil} day${daysUntil === 1 ? '' : 's'} to go`;
                    }

                    const formattedDate = new Date(birthday.date + 'T00:00:00').toLocaleDateString('en-US', {
                        month: 'long',
                        day: 'numeric'
                    });

                    return `
                        <div class="birthday-item ${statusClass}" data-id="${birthday.id}">
                            <div class="birthday-info">
                                <div class="birthday-details">
                                    <div class="birthday-header">
                                        <div class="birthday-name">${this.escapeHtml(birthday.name)}</div>
                                        <div class="birthday-date">${formattedDate}</div>
                                    </div>
                                    <div class="days-until">${statusText}</div>
                                    ${birthday.notes ? `<div style="color: rgba(255,255,255,0.7); font-size: 0.9rem; margin-top: 5px;">${this.escapeHtml(birthday.notes)}</div>` : ''}
                                </div>
                                <button class="delete-btn" onclick="birthdayManager.deleteBirthday('${birthday.id}')">
                                    🗑️ Delete
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            getDaysUntilBirthday(dateString) {
                const today = new Date();
                const currentYear = today.getFullYear();
                let birthday = new Date(dateString + 'T00:00:00');
                birthday.setFullYear(currentYear);

                if (birthday < today) {
                    birthday.setFullYear(currentYear + 1);
                }

                const diffTime = birthday - today;
                return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            }

            updateStats() {
                const birthdayArray = Object.values(this.birthdays);
                const total = birthdayArray.length;
                
                const today = new Date();
                const currentMonth = today.getMonth();
                const todayString = today.toISOString().split('T')[0];
                
                let thisMonth = 0;
                let todayCount = 0;

                birthdayArray.forEach(birthday => {
                    const birthDate = new Date(birthday.date + 'T00:00:00');
                    
                    if (birthDate.getMonth() === currentMonth) {
                        thisMonth++;
                    }
                    
                    const birthDateString = birthday.date;
                    const todayMonthDay = todayString.substring(5);
                    const birthMonthDay = birthDateString.substring(5);
                    
                    if (birthMonthDay === todayMonthDay) {
                        todayCount++;
                    }
                });

                document.getElementById('total-birthdays').textContent = total;
                document.getElementById('upcoming-count').textContent = thisMonth;
                document.getElementById('today-count').textContent = todayCount;
            }

            checkTodaysBirthdays() {
                const today = new Date().toISOString().split('T')[0];
                const todayMonthDay = today.substring(5);
                
                Object.values(this.birthdays).forEach(birthday => {
                    const birthMonthDay = birthday.date.substring(5);
                    if (birthMonthDay === todayMonthDay) {
                        const element = document.querySelector(`[data-id="${birthday.id}"]`);
                        if (element && !element.classList.contains('celebrating')) {
                            element.classList.add('celebrating');
                            this.showNotification(`🎂 Happy Birthday ${birthday.name}! 🎉`, 'birthday');
                            this.createConfetti();
                        }
                    }
                });
            }

            showNotification(message, type = 'info') {
                this.notification.textContent = message;
                this.notification.className = `notification show ${type}`;
                
                setTimeout(() => {
                    this.notification.classList.remove('show');
                }, 3000);
            }

            createConfetti() {
                const colors = ['#ff6b6b', '#feca57', '#48dbfb', '#ff9ff3', '#54a0ff'];
                
                for (let i = 0; i < 50; i++) {
                    setTimeout(() => {
                        const confetti = document.createElement('div');
                        confetti.className = 'confetti';
                        confetti.style.left = Math.random() * 100 + 'vw';
                        confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                        confetti.style.animationDelay = Math.random() * 2 + 's';
                        confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                        
                        document.body.appendChild(confetti);
                        
                        setTimeout(() => {
                            confetti.remove();
                        }, 4000);
                    }, i * 50);
                }
            }

            createFloatingParticles() {
                setInterval(() => {
                    const particle = document.createElement('div');
                    particle.className = 'floating-particles';
                    particle.style.left = Math.random() * 100 + 'vw';
                    particle.style.top = Math.random() * 100 + 'vh';
                    particle.style.animationDelay = Math.random() * 2 + 's';
                    
                    document.body.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 4000);
                }, 2000);
            }

            escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        }

        // Three.js Background Animation
        class ThreeJSBackground {
            constructor() {
                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                this.renderer = new THREE.WebGLRenderer({ alpha: true });
                this.particles = [];
                
                this.init();
                this.createParticles();
                this.animate();
                this.handleResize();
            }

            init() {
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setClearColor(0x000000, 0);
                document.getElementById('threejs-background').appendChild(this.renderer.domElement);
                
                this.camera.position.z = 5;
            }

            createParticles() {
                const geometry = new THREE.BufferGeometry();
                const particleCount = 200;
                const positions = new Float32Array(particleCount * 3);
                const colors = new Float32Array(particleCount * 3);
                const sizes = new Float32Array(particleCount);

                for (let i = 0; i < particleCount; i++) {
                    positions[i * 3] = (Math.random() - 0.5) * 20;
                    positions[i * 3 + 1] = (Math.random() - 0.5) * 20;
                    positions[i * 3 + 2] = (Math.random() - 0.5) * 20;

                    const color = new THREE.Color();
                    color.setHSL(Math.random(), 0.8, 0.8);
                    colors[i * 3] = color.r;
                    colors[i * 3 + 1] = color.g;
                    colors[i * 3 + 2] = color.b;

                    sizes[i] = Math.random() * 2 + 1;
                }

                geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
                geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

                const material = new THREE.ShaderMaterial({
                    uniforms: {
                        time: { value: 0 }
                    },
                    vertexShader: `
                        attribute float size;
                        attribute vec3 color;
                        varying vec3 vColor;
                        uniform float time;
                        
                        void main() {
                            vColor = color;
                            vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
                            
                            // Add floating animation
                            mvPosition.y += sin(time + position.x * 0.5) * 0.5;
                            mvPosition.x += cos(time + position.y * 0.3) * 0.3;
                            
                            gl_PointSize = size * (300.0 / -mvPosition.z);
                            gl_Position = projectionMatrix * mvPosition;
                        }
                    `,
                    fragmentShader: `
                        varying vec3 vColor;
                        
                        void main() {
                            float distance = length(gl_PointCoord - vec2(0.5, 0.5));
                            if (distance > 0.5) discard;
                            
                            float alpha = 1.0 - (distance * 2.0);
                            gl_FragColor = vec4(vColor, alpha * 0.8);
                        }
                    `,
                    transparent: true,
                    vertexColors: true,
                    blending: THREE.AdditiveBlending
                });

                this.particleSystem = new THREE.Points(geometry, material);
                this.scene.add(this.particleSystem);

                // Add geometric shapes floating around
                this.createFloatingShapes();
            }

            createFloatingShapes() {
                const shapes = [];
                const shapeCount = 15;

                for (let i = 0; i < shapeCount; i++) {
                    let geometry, material, mesh;
                    const shapeType = Math.floor(Math.random() * 4);
                    
                    switch (shapeType) {
                        case 0:
                            geometry = new THREE.SphereGeometry(0.1, 8, 6);
                            break;
                        case 1:
                            geometry = new THREE.BoxGeometry(0.2, 0.2, 0.2);
                            break;
                        case 2:
                            geometry = new THREE.ConeGeometry(0.1, 0.3, 6);
                            break;
                        case 3:
                            geometry = new THREE.TetrahedronGeometry(0.15);
                            break;
                    }

                    material = new THREE.MeshBasicMaterial({
                        color: new THREE.Color().setHSL(Math.random(), 0.7, 0.6),
                        transparent: true,
                        opacity: 0.6,
                        wireframe: Math.random() > 0.5
                    });

                    mesh = new THREE.Mesh(geometry, material);
                    mesh.position.set(
                        (Math.random() - 0.5) * 15,
                        (Math.random() - 0.5) * 15,
                        (Math.random() - 0.5) * 15
                    );

                    mesh.rotation.set(
                        Math.random() * Math.PI,
                        Math.random() * Math.PI,
                        Math.random() * Math.PI
                    );

                    shapes.push({
                        mesh: mesh,
                        rotationSpeed: {
                            x: (Math.random() - 0.5) * 0.02,
                            y: (Math.random() - 0.5) * 0.02,
                            z: (Math.random() - 0.5) * 0.02
                        },
                        floatSpeed: Math.random() * 0.01 + 0.005
                    });

                    this.scene.add(mesh);
                }

                this.shapes = shapes;
            }

            animate() {
                requestAnimationFrame(() => this.animate());

                const time = Date.now() * 0.001;

                // Update particle system
                if (this.particleSystem && this.particleSystem.material.uniforms) {
                    this.particleSystem.material.uniforms.time.value = time;
                    this.particleSystem.rotation.y += 0.002;
                }

                // Update floating shapes
                if (this.shapes) {
                    this.shapes.forEach((shape, index) => {
                        shape.mesh.rotation.x += shape.rotationSpeed.x;
                        shape.mesh.rotation.y += shape.rotationSpeed.y;
                        shape.mesh.rotation.z += shape.rotationSpeed.z;

                        shape.mesh.position.y += Math.sin(time * shape.floatSpeed + index) * 0.01;
                        shape.mesh.position.x += Math.cos(time * shape.floatSpeed * 0.7 + index) * 0.005;
                    });
                }

                // Camera movement
                this.camera.position.x = Math.sin(time * 0.1) * 2;
                this.camera.position.y = Math.cos(time * 0.1) * 1;
                this.camera.lookAt(this.scene.position);

                this.renderer.render(this.scene, this.camera);
            }

            handleResize() {
                window.addEventListener('resize', () => {
                    this.camera.aspect = window.innerWidth / window.innerHeight;
                    this.camera.updateProjectionMatrix();
                    this.renderer.setSize(window.innerWidth, window.innerHeight);
                });
            }
        }

        // Sound Effects Class
        class SoundEffects {
            constructor() {
                this.audioContext = null;
                this.initAudio();
            }

            initAudio() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                } catch (e) {
                    console.log('Web Audio API not supported');
                }
            }

            playTone(frequency, duration, type = 'sine') {
                if (!this.audioContext) return;

                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);

                oscillator.frequency.setValueAtTime(frequency, this.audioContext.currentTime);
                oscillator.type = type;

                gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + duration);

                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + duration);
            }

            playSuccess() {
                this.playTone(523.25, 0.2); // C5
                setTimeout(() => this.playTone(659.25, 0.2), 100); // E5
                setTimeout(() => this.playTone(783.99, 0.3), 200); // G5
            }

            playDelete() {
                this.playTone(200, 0.1, 'square');
                setTimeout(() => this.playTone(150, 0.2, 'square'), 50);
            }

            playBirthday() {
                const notes = [523.25, 523.25, 587.33, 523.25, 698.46, 659.25];
                const durations = [0.25, 0.25, 0.5, 0.5, 0.5, 1];
                
                notes.forEach((note, index) => {
                    setTimeout(() => this.playTone(note, durations[index]), index * 300);
                });
            }
        }

        // Advanced Animation Controller
        class AnimationController {
            constructor() {
                this.animations = new Map();
                this.init();
            }

            init() {
                // Animate elements on scroll
                this.observeElements();
                
                // Add mouse interaction effects
                this.addMouseEffects();
                
                // Add keyboard shortcuts
                this.addKeyboardShortcuts();
            }

            observeElements() {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.animation = 'fadeInUp 0.6s ease-out';
                        }
                    });
                });

                document.querySelectorAll('.birthday-item, .stat-card, .form-section, .birthdays-section').forEach(el => {
                    observer.observe(el);
                });
            }

            addMouseEffects() {
                document.addEventListener('mousemove', (e) => {
                    const cursor = document.querySelector('.cursor') || this.createCursor();
                    cursor.style.left = e.clientX + 'px';
                    cursor.style.top = e.clientY + 'px';

                    // Create trailing particles on mouse move
                    if (Math.random() > 0.95) {
                        this.createMouseParticle(e.clientX, e.clientY);
                    }
                });
            }

            createCursor() {
                const cursor = document.createElement('div');
                cursor.className = 'cursor';
                cursor.style.cssText = `
                    position: fixed;
                    width: 20px;
                    height: 20px;
                    background: radial-gradient(circle, rgba(255,107,107,0.8), rgba(254,202,87,0.8));
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 9999;
                    mix-blend-mode: difference;
                    transition: transform 0.1s ease;
                `;
                document.body.appendChild(cursor);
                return cursor;
            }

            createMouseParticle(x, y) {
                const particle = document.createElement('div');
                particle.style.cssText = `
                    position: fixed;
                    left: ${x}px;
                    top: ${y}px;
                    width: 4px;
                    height: 4px;
                    background: #ff6b6b;
                    border-radius: 50%;
                    pointer-events: none;
                    z-index: 100;
                    animation: mouseParticle 1s ease-out forwards;
                `;

                const style = document.createElement('style');
                style.textContent = `
                    @keyframes mouseParticle {
                        0% {
                            opacity: 1;
                            transform: scale(1);
                        }
                        100% {
                            opacity: 0;
                            transform: scale(0) translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px);
                        }
                    }
                `;
                document.head.appendChild(style);
                document.body.appendChild(particle);

                setTimeout(() => {
                    particle.remove();
                    style.remove();
                }, 1000);
            }

            addKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    if (e.ctrlKey || e.metaKey) {
                        switch (e.key) {
                            case 'n':
                                e.preventDefault();
                                document.getElementById('name').focus();
                                break;
                            case 'Enter':
                                e.preventDefault();
                                document.getElementById('birthday-form').dispatchEvent(new Event('submit'));
                                break;
                        }
                    }
                });
            }

            pulseElement(element) {
                element.style.animation = 'pulse 0.6s ease-in-out';
                setTimeout(() => {
                    element.style.animation = '';
                }, 600);
            }
        }

        // Weather Integration (Bonus Feature)
        class WeatherIntegration {
            constructor() {
                this.addWeatherWidget();
            }

            addWeatherWidget() {
                const widget = document.createElement('div');
                widget.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 20px;
                    background: rgba(255, 255, 255, 0.1);
                    backdrop-filter: blur(20px);
                    border-radius: 15px;
                    padding: 15px;
                    color: white;
                    font-size: 0.9rem;
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    z-index: 1000;
                    transition: all 0.3s ease;
                `;

                const now = new Date();
                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const dateString = now.toLocaleDateString('en-US', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });

                widget.innerHTML = `
                    <div style="font-weight: 600; margin-bottom: 5px;">🕐 ${timeString}</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">${dateString}</div>
                `;

                document.body.appendChild(widget);

                // Update time every second
                setInterval(() => {
                    const now = new Date();
                    const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    widget.querySelector('div').textContent = `🕐 ${timeString}`;
                }, 1000);
            }
        }

        // Initialize everything when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize all components
            window.birthdayManager = new BirthdayManager();
            window.threeJSBackground = new ThreeJSBackground();
            window.soundEffects = new SoundEffects();
            window.animationController = new AnimationController();
            window.weatherIntegration = new WeatherIntegration();

            // Add enhanced interactions
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('btn')) {
                    window.soundEffects.playSuccess();
                }
                if (e.target.classList.contains('delete-btn')) {
                    window.soundEffects.playDelete();
                }
            });

            // Add loading animation
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 1s ease-in-out';
                document.body.style.opacity = '1';
            }, 100);

            // Show welcome message
            setTimeout(() => {
                window.birthdayManager.showNotification('🎉 Welcome to Ultimate Birthday Reminder! 🎂', 'success');
            }, 1500);

            // Add periodic visual enhancements
            setInterval(() => {
                if (Math.random() > 0.8) {
                    const elements = document.querySelectorAll('.birthday-item');
                    if (elements.length > 0) {
                        const randomElement = elements[Math.floor(Math.random() * elements.length)];
                        window.animationController.pulseElement(randomElement);
                    }
                }
            }, 10000);
        });

        // Additional utility functions
        function createRippleEffect(event) {
            const button = event.currentTarget;
            const circle = document.createElement('span');
            const diameter = Math.max(button.clientWidth, button.clientHeight);
            const radius = diameter / 2;

            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${event.clientX - button.offsetLeft - radius}px`;
            circle.style.top = `${event.clientY - button.offsetTop - radius}px`;
            circle.classList.add('ripple');

            const ripple = button.getElementsByClassName('ripple')[0];
            if (ripple) {
                ripple.remove();
            }

            button.appendChild(circle);
        }

        // Add ripple effect styles
        const rippleStyle = document.createElement('style');
        rippleStyle.textContent = `
            .btn {
                position: relative;
                overflow: hidden;
            }
            
            .ripple {
                position: absolute;
                border-radius: 50%;
                transform: scale(0);
                animation: ripple 0.6s linear;
                background-color: rgba(255, 255, 255, 0.7);
            }
            
            @keyframes ripple {
                to {
                    transform: scale(4);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(rippleStyle);

        // Add ripple effect to buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('btn')) {
                createRippleEffect(e);
            }
        });
    </script>
</body>
</html>